(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a(329)},144:function(e,t,a){},145:function(e,t,a){},167:function(e,t){},169:function(e,t){},329:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),o=a.n(r),i=(a(144),a(23)),s=a(24),c=a(26),u=a(25),m=a(27),d=(a(145),a(41)),p=a.n(d),h=a(130),g=a.n(h),E=a(132),f=a.n(E),_=a(28),b=a.n(_),x=a(14),v=a.n(x),y=a(15),D=a.n(y),S=a(19),C=a.n(S),O=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.piechartData,a=this.props.callCount;return l.a.createElement("header",{className:"App-header",onClick:function(){return e.props.toggle_sidebar()}},l.a.createElement(b.a,null,l.a.createElement(v.a,null,l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement(D.a,{style:{fontSize:"30px",color:"white"}},"Possible Failure Detection"))),l.a.createElement(v.a,null,l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement("p",null,"Arrived calls: ",a))),l.a.createElement(v.a,null,l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement(f.a,{style:{height:"300px"},onClick:function(t,a,n){return e.props.piechart_tapped(t,a,n,"piechartData")},data:t,label:!0,labelStyle:{fontSize:"5px",fontFamily:"sans-serif",fill:"#121212"}}))),t.map(function(e,t){return l.a.createElement(v.a,{key:t},l.a.createElement(C.a,{container:!0,justify:"center"},l.a.createElement(D.a,{style:{fontSize:"20px",color:"white"}},e.value,' queries related to "',e.description,'"')))})))}}]),t}(n.Component),w=a(136),j=a.n(w),k=a(133),F=a.n(k),P=a(135),q=a.n(P),V=a(40),A=a(79),B=a.n(A),K=a(134),U=a.n(K),z=Object(V.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,a=e.classes,n=e.onClose;return l.a.createElement(F.a,{disableTypography:!0,className:a.root},l.a.createElement(D.a,{variant:"h6"},t),n?l.a.createElement(B.a,{"aria-label":"Close",className:a.closeButton,onClick:n},l.a.createElement(U.a,null)):null)}),I=Object(V.withStyles)(function(e){return{root:{margin:0,padding:5*e.spacing.unit}}})(q.a),M=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.data;return l.a.createElement("div",null,l.a.createElement(j.a,{onClose:this.props.close_modal,"aria-labelledby":"customized-dialog-title",open:t},l.a.createElement(z,{id:"customized-dialog-title",onClose:this.props.close_modal},a?a.title:""),l.a.createElement(I,null,l.a.createElement(D.a,{gutterBottom:!0},l.a.createElement("b",null,"Description")," ",a?a.description:""),l.a.createElement(D.a,{gutterBottom:!0},l.a.createElement("b",null,"Sample count")," ",a?a.value:""))))}}]),t}(l.a.Component),N=a(138),R=a(137),T=a.n(R),W=a(47),J=a.n(W),G=a(48),L=a.n(G),$=a(50),H=a.n($),Q=a(52),X=a.n(Q),Y=a(49),Z=a.n(Y),ee=a(29),te=a.n(ee),ae=a(51),ne=a.n(ae),le=a(46),re=a.n(le),oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).start_recording=function(){a.setState({record:!0})},a.stop_recording=function(){a.setState({record:!1})},a.on_data=function(e){},a.on_stop=function(e){a.setState({blobUrl:e.blobURL})},a.handle_expansion_panel=function(e){return function(t,n){a.setState({expanded:!!n&&e}),a.props.reset_message()}},a.handle_text_change=function(e){a.setState({textFieldData:e.target.value})},a.handle_upload=function(e){console.log(e),a.setState({uploadedFile:e.target.files[0]})},a.state={expanded:!1,textFieldData:"",record:!1,blobUrl:"",uploadedFile:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.open,n=t.isProgressVisible,r=t.messageData;return l.a.createElement(T.a,{open:a,onClose:function(){return e.props.toggle_sidebar()}},l.a.createElement(D.a,{gutterBottom:!0,variant:"h5",component:"h2",style:{margin:20}},"Analyze new audio file"),l.a.createElement(J.a,{square:!0,expanded:"panel1"===this.state.expanded,onChange:this.handle_expansion_panel("panel1")},l.a.createElement(L.a,{expandIcon:l.a.createElement(Z.a,null)},l.a.createElement(D.a,{color:"primary",variant:"subtitle1"},"Upload recorded file")),l.a.createElement(H.a,null,l.a.createElement(b.a,null,l.a.createElement(v.a,null,l.a.createElement(D.a,null,l.a.createElement("b",null,"Record audio from mic"))),l.a.createElement(v.a,null,l.a.createElement(N.a,{record:this.state.record,className:"sound-wave",onStop:this.on_stop,onData:this.on_data,strokeColor:"#000000",backgroundColor:"#52BE80"})),l.a.createElement(v.a,null,l.a.createElement(C.a,{container:!0,spacing:8},l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement(te.a,{variant:"contained",color:"primary",onClick:function(){return e.start_recording()}},"Start recording")),l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement(te.a,{variant:"contained",color:"primary",onClick:function(){return e.stop_recording()},style:{alignItems:"flex-end"}},"Stop recording")),l.a.createElement(C.a,{item:!0,xs:4},l.a.createElement("a",{href:this.state.blobUrl,download:"Untitled.wav",style:{textDecoration:"none"}},l.a.createElement(te.a,{variant:"contained",color:"primary"},"Download recording"))))),l.a.createElement(v.a,null,n?l.a.createElement(ne.a,null):null,l.a.createElement(D.a,{color:r&&"OK"===r.status?"default":"error"},r?r.message:null)),l.a.createElement(v.a,null,l.a.createElement(D.a,null,l.a.createElement("b",null,"* Enter .wav filename without extension"))),l.a.createElement(v.a,null,l.a.createElement(X.a,{id:"outlined-name",label:"Audio Filename",value:this.state.textFieldData,onChange:function(t){return e.handle_text_change(t)},margin:"normal",variant:"outlined",required:!0})),l.a.createElement(v.a,null,l.a.createElement(C.a,{container:!0,spacing:40},l.a.createElement(C.a,{item:!0,xs:6},l.a.createElement(re.a,{accept:"audio/wav",type:"file",onChange:function(t){return e.handle_upload(t)},placeholder:"abc"})),l.a.createElement(C.a,{item:!0,xs:6},l.a.createElement(te.a,{variant:"contained",color:"primary",onClick:function(){return e.props.upload_audio_file(e.state.textFieldData,e.state.uploadedFile)}},"Upload"))))))),l.a.createElement(J.a,{square:!0,expanded:"panel2"===this.state.expanded,onChange:this.handle_expansion_panel("panel2")},l.a.createElement(L.a,{expandIcon:l.a.createElement(Z.a,null)},l.a.createElement(D.a,{color:"primary",variant:"subtitle1"},"Speech-to-Text")),l.a.createElement(H.a,null,l.a.createElement(b.a,null,l.a.createElement(v.a,null,l.a.createElement(D.a,null,l.a.createElement("b",null,"* Enter .wav filename without extension"))),l.a.createElement(v.a,null,n?l.a.createElement(ne.a,null):null,l.a.createElement(D.a,{width:300,color:r&&"OK"===r.status?"default":"error"},r?r.message:null)),l.a.createElement(v.a,null,l.a.createElement(X.a,{id:"outlined-name",label:"WAV Filename",value:this.state.textFieldData,onChange:function(t){return e.handle_text_change(t)},margin:"normal",variant:"outlined",required:!0})),l.a.createElement(v.a,null,l.a.createElement(te.a,{variant:"contained",color:"primary",onClick:function(){return e.props.convert_speech_to_text(e.state.textFieldData)}},"Send"))))),l.a.createElement(J.a,{square:!0,expanded:"panel3"===this.state.expanded,onChange:this.handle_expansion_panel("panel3")},l.a.createElement(L.a,{expandIcon:l.a.createElement(Z.a,null)},l.a.createElement(D.a,{color:"primary",variant:"subtitle1"},"Entity Extraction")),l.a.createElement(H.a,null,l.a.createElement(b.a,null,l.a.createElement(v.a,null,l.a.createElement(D.a,null,l.a.createElement("b",null,"* Enter unprocessed .txt filename without extension"))),l.a.createElement(v.a,null,n?l.a.createElement(ne.a,null):null,l.a.createElement(D.a,{color:r&&"OK"===r.status?"default":"error"},r?r.message:null)),l.a.createElement(v.a,null,l.a.createElement(X.a,{id:"outlined-name",label:"Text Filename",value:this.state.textFieldData,onChange:function(t){return e.handle_text_change(t)},margin:"normal",variant:"outlined",required:!0})),l.a.createElement(v.a,null,l.a.createElement(te.a,{variant:"contained",color:"primary",onClick:function(){return e.props.find_entities(e.state.textFieldData)}},"Send"))))),l.a.createElement(J.a,{square:!0,expanded:"panel4"===this.state.expanded,onChange:this.handle_expansion_panel("panel4")},l.a.createElement(L.a,{expandIcon:l.a.createElement(Z.a,null)},l.a.createElement(D.a,{color:"primary",variant:"subtitle1"},"Sentence Clustering")),l.a.createElement(H.a,null,l.a.createElement(b.a,null,l.a.createElement(v.a,null,l.a.createElement(D.a,null,l.a.createElement("b",null,"* Enter .txt filename without extension"))),l.a.createElement(v.a,null,n?l.a.createElement(ne.a,null):null,l.a.createElement(D.a,{color:r&&"OK"===r.status?"default":"error"},r?r.message:null)),l.a.createElement(v.a,null,l.a.createElement(X.a,{id:"outlined-name",label:"Text Filename",value:this.state.textFieldData,onChange:function(t){return e.handle_text_change(t)},margin:"normal",variant:"outlined",required:!0})),l.a.createElement(v.a,null,l.a.createElement(te.a,{variant:"contained",color:"primary",onClick:function(){return e.props.cluster_sentence(e.state.textFieldData)}},"Send"))))))}}]),t}(n.Component),ie=Object(V.withStyles)(function(e){return{root:{flexGrow:1},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary}}})(oe),se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).reset_message=function(){a.setState({messageData:{}})},a.close_modal=function(){a.setState({isModalOpen:!1})},a.toggle_sidebar=function(){},a.piechart_tapped=function(e,t,n,l){e.stopPropagation();var r={};"piechartData"===l&&(r=a.state.piechartData[n]),a.setState({isModalOpen:!0,modalData:r})},a.upload_audio_file=function(e,t){if(""!==e&&t){a.setState({isProgressVisible:!0,messageData:{}});var n=new FormData;n.append(e,t),p.a.post("http://localhost:5000/upload_audio_file",n).then(function(e){a.setState({isProgressVisible:!1,messageData:e.data})}).catch(function(e){console.log(e)})}else a.setState({messageData:{status:"KO",message:"file name required"}})},a.convert_speech_to_text=function(e){""===e?a.setState({messageData:{status:"KO",message:"file name required"}}):(a.setState({isProgressVisible:!0,messageData:{}}),p.a.post("http://localhost:5000/convert_speech_to_text",{file_name:e}).then(function(e){a.setState({isProgressVisible:!1,messageData:e.data})}).catch(function(e){console.log(e)}))},a.find_entities=function(e){""===e?a.setState({messageData:{status:"KO",message:"file name required"}}):(a.setState({isProgressVisible:!0,messageData:{}}),p.a.post("http://localhost:5000/find_entities",{file_name:e}).then(function(e){a.setState({isProgressVisible:!1,messageData:e.data})}).catch(function(e){console.log(e)}))},a.cluster_sentence=function(e){""===e?a.setState({messageData:{status:"KO",message:"file name required"}}):(a.setState({isProgressVisible:!0,messageData:{}}),p.a.post("http://localhost:5000/cluster_sentence",{file_name:e}).then(function(e){a.setState({isProgressVisible:!1,messageData:e.data}),"OK"===e.data.status&&a.get_current_stats()}).catch(function(e){console.log(e)}))},a.state={piechartData:[],callCount:0,modalData:{},isSidebarOpen:!1,isModalOpen:!1,isProgressVisible:!1,whichIndex:0,messageData:{}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="6789ABCDEF"[Math.floor(10*Math.random())];return e}},{key:"componentDidMount",value:function(){this.get_current_stats()}},{key:"get_current_stats",value:function(){var e=this;p.a.get("https://10.77.63.156:2040/get_current_stats",{httpsAgent:new g.a.Agent({rejectUnauthorized:!1})}).then(function(t){var a=t.data.data,n=[];a.clusters.forEach(function(t,a){n.push({title:"Cluster "+a,description:t.description,value:t.count,color:e.getRandomColor()})}),e.setState({piechartData:n,callCount:a.number_of_calls})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(O,{piechartData:this.state.piechartData,callCount:this.state.callCount,piechart_tapped:this.piechart_tapped,toggle_sidebar:this.toggle_sidebar}),l.a.createElement(M,{open:this.state.isModalOpen,data:this.state.modalData,close_modal:this.close_modal}),l.a.createElement(ie,{open:this.state.isSidebarOpen,toggle_sidebar:this.toggle_sidebar,upload_audio_file:this.upload_audio_file,convert_speech_to_text:this.convert_speech_to_text,find_entities:this.find_entities,cluster_sentence:this.cluster_sentence,isProgressVisible:this.state.isProgressVisible,messageData:this.state.messageData,reset_message:this.reset_message}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[139,1,2]]]);
//# sourceMappingURL=main.c463b163.chunk.js.map